;                                                                                                                                               
;                                                ^                                                                                                  
;    +---------+   +---------+                 /   \                                                                                                          
;    | product |   | counter |---------------><  <  >                                                                                                            
;    +---------+   +---------+                 \   /                                                                                                          
;      ^  |            |  | |                    v                                                                                         
;      |  +-----+   +--+  | +-------------+      ^                                                                                    
;      |        |   |     |        ^      |      |                                                                                    
;      |        |   |     |       / \     |      ^                                                                                           
;      |        |   |     +-+    / 1 \    |     / \                                                                                          
;      |        |   |       |   +-----+   |    / n \                                                                                         
;      |        |   |       |      |      |   +-----+                                                                                        
;      |        |   |       |   +--+      |                                                                                           
;      |        v   v       v   v         |                                                                                           
;      |     +---------+  +-------+       |                                                                                             
;      |      \   *   /    \  +  /        |                                                                                             
;      |       +-----+      +---+         |                                                                                             
;      |    _     |           |    _      |                                                                                           
;      +---|x|----+           +---|x|-----+                                                                                           
;                                                                                                                                                
;      product<-product       counter<-counter                                                                                                       
;                                                                                                                                                
;                                                                                                                                                
;                                                                                                                                                
;             done                                                                                                                                    
;              ^                                                                                                                                     
;              |                                                                                                                                     
;              ^          +------------------+     +------------------+                                                                                                                     
; start----->< > >------->| product<-product |---->| counter<-counter |--+                                                                                                                  
;              v          +------------------+     +------------------+  |                                                                                                                  
;              ^                                                         |                                                                           
;              |                                                         |                                                                           
;              +---------------------------------------------------------+                                                                           
;                                                                                                                                                
